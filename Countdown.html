<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026æ³•è€ƒå€’è®¡æ—¶ - å¤‡è€ƒåŠ©æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Roboto+Mono:wght@500;700&display=swap" rel="stylesheet">
    <style>
        /* åŸºç¡€å˜é‡å®šä¹‰ */
        :root {
            --primary-color: #4c75e6;
            --glass-bg: rgba(255, 255, 255, 0.12);
            --glass-border: rgba(255, 255, 255, 0.25);
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.85);
            --accent-glow: rgba(76, 117, 230, 0.4);
            --card-bg: rgba(20, 30, 60, 0.6);
            --title-gradient-from: var(--text-main);
            --title-gradient-to: rgba(255,255,255,0.8);
            /* åŠ¨æ•ˆé¢œè‰²å˜é‡ */
            --effect-color: rgba(255, 255, 255, 0.8);
        }

        /* ä¸»é¢˜ï¼šæ—¥å‡ºæ¨¡å¼ */
        [data-theme="sunrise"] {
            --primary-color: #ff8c42;
            --glass-bg: rgba(255, 255, 255, 0.2);
            --glass-border: rgba(255, 255, 255, 0.4);
            --text-main: #5a3d2b;
            --text-muted: rgba(90, 61, 43, 0.9);
            --accent-glow: rgba(255, 140, 66, 0.5);
            --card-bg: rgba(255, 240, 220, 0.6);
            --title-gradient-from: var(--text-main);
            --title-gradient-to: rgba(90, 61, 43, 0.8);
            /* æ—¥å‡ºæ¨¡å¼åŠ¨æ•ˆé¢œè‰² - æé«˜å¯¹æ¯”åº¦ */
            --effect-color: rgba(200, 80, 20, 0.8);
        }

        /* ä¸»é¢˜ï¼šæŠ¤çœ¼æ¨¡å¼ */
        [data-theme="eyecare"] {
            --primary-color: #5d8c7f;
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.3);
            --text-main: #2c4a3f;
            --text-muted: rgba(44, 74, 63, 0.85);
            --accent-glow: rgba(93, 140, 127, 0.4);
            --card-bg: rgba(232, 245, 233, 0.7);
            --title-gradient-from: var(--text-main);
            --title-gradient-to: rgba(44, 74, 63, 0.8);
            --effect-color: rgba(44, 74, 63, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.5s ease, color 0.3s ease;
        }

        /* ========== æ ¸å¿ƒå±…ä¸­ä¿®æ”¹ ========== */
        body {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Noto Sans SC', "PingFang SC", "Microsoft YaHei", sans-serif;
            position: relative;
            background-color: #0f172a;
            padding: 1rem;
            margin: 0; /* ç¡®ä¿bodyæ— é»˜è®¤å¤–è¾¹è· */
        }

        /* ä¸»å®¹å™¨å¼ºåˆ¶å±…ä¸­ */
        .main-container {
            position: relative;
            width: 100%;
            max-width: 500px; /* ä¸å¡ç‰‡æœ€å¤§å®½åº¦ä¸€è‡´ */
            margin: 0 auto; /* æ°´å¹³å±…ä¸­ */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* åŠ¨æ€CanvasèƒŒæ™¯å±‚ - å…¨å±è¦†ç›– */
        #bgCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw; /* è§†å£å®½åº¦ */
            height: 100vh; /* è§†å£é«˜åº¦ */
            z-index: 0;
        }

        /* ç»ç’ƒæ‹Ÿæ€ä¸»å¡ç‰‡ - ç«–å±é»˜è®¤æ ·å¼ */
        .glass-card {
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.1) inset,
                0 0 100px var(--accent-glow) inset;
            position: relative;
            z-index: 10;
            transform: translateY(0);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.5s;
            color: var(--text-main);
            width: 100%;
            max-width: 500px;
            padding: 2rem;
            margin: 0 auto; /* ç¡®ä¿å¡ç‰‡è‡ªèº«ä¹Ÿå±…ä¸­ */
        }

        /* ç¿»ç‰Œæ—¶é’Ÿæ ·å¼ */
        .flip-clock {
            perspective: 1000px;
            display: inline-block;
            width: 60px;
            height: 70px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            position: relative;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            overflow: hidden;
            font-family: 'Roboto Mono', monospace;
            cursor: pointer;
        }

        /* æ—¶åˆ†ç§’ç‚¹å‡»åŠ¨æ•ˆ */
        .flip-clock.clicked {
            animation: clockClick 0.5s ease-in-out;
        }

        @keyframes clockClick {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .flip-clock-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            line-height: 70px;
            font-size: 32px;
            font-weight: 700;
            color: #1e293b;
            transform-style: preserve-3d;
        }

        .flip-clock.flipping .flip-clock-inner {
            animation: flipDown 0.6s ease-in-out;
        }

        @keyframes flipDown {
            0% { transform: rotateX(0); }
            50% { transform: rotateX(-90deg); opacity: 0.8; }
            100% { transform: rotateX(0); }
        }

        /* æ ‡é¢˜å­—ä½“æ ·å¼ */
        .title-calligraphy {
            font-family: 'Noto Sans SC', "PingFang SC", "Microsoft YaHei", sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            letter-spacing: 0.15em;
            text-shadow: 
                0 4px 12px rgba(0,0,0,0.3),
                0 0 40px var(--accent-glow);
            background: linear-gradient(to bottom, var(--title-gradient-from), var(--title-gradient-to));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            transition: all 0.5s ease;
        }

        /* é‡Œç¨‹ç¢‘è¿›åº¦æ¡ */
        .milestone-track {
            background: rgba(128, 128, 128, 0.2);
            height: 6px;
            border-radius: 3px;
            position: relative;
            margin-top: 10px;
        }
        .milestone-fill {
            background: var(--primary-color);
            height: 100%;
            border-radius: 3px;
            transition: width 1s ease;
            box-shadow: 0 0 10px var(--accent-glow);
        }
        .milestone-node {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            background: var(--card-bg);
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            transition: all 0.3s;
        }
        .milestone-node.active {
            background: var(--primary-color);
            box-shadow: 0 0 10px var(--primary-color);
            transform: translate(-50%, -50%) scale(1.3);
        }

        /* ç•ªèŒ„é’Ÿåœ†å½¢è¿›åº¦ */
        .pomodoro-ring {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        .pomodoro-circle {
            transition: stroke-dashoffset 1s linear;
        }

        /* æŒ‰é’®äº¤äº’ */
        .btn-interactive {
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }
        .btn-interactive:active {
            transform: scale(0.95);
        }
        .btn-interactive::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        .btn-interactive:active::after {
            width: 200px;
            height: 200px;
        }

        /* æ³•è€ƒåŠ æ²¹æŒ‰é’®ç‰¹æ®Šæ ·å¼ */
        .cheer-btn {
            background: linear-gradient(135deg, var(--primary-color), #7c3aed);
            position: relative;
            overflow: hidden;
        }
        
        .cheer-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .cheer-btn:hover::before {
            left: 100%;
        }

        .cheer-btn.playing {
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px var(--accent-glow); }
            50% { box-shadow: 0 0 40px var(--accent-glow), 0 0 60px var(--primary-color); }
        }

        /* éšè—çŠ¶æ€ */
        .hidden-section {
            display: none !important;
        }

        /* æç¤ºæ¶ˆæ¯ */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 24px;
            font-size: 14px;
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
            pointer-events: none;
        }
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* æ—¶é—´æ¿€åŠ±è¯­æµ®å±‚ */
        .time-motivation {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            color: var(--text-main);
            font-size: 14px;
            font-family: 'Noto Serif SC', serif;
            opacity: 0;
            padding: 8px 20px;
            border-radius: 16px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            transition: all 0.8s ease;
            z-index: 999;
            pointer-events: none;
            max-width: 80%;
            text-align: center;
        }

        .time-motivation.show {
            opacity: 0.9;
            transform: translateX(-50%) translateY(0);
        }

        /* éšè—æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar {
            display: none;
        }

        /* å¤©æ•°åŒºåŸŸç‚¹å‡»æ ·å¼ */
        #dayNum {
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        #dayNum:hover {
            transform: scale(1.05);
        }

        #dayLabel {
            transition: all 0.3s ease;
        }

        /* åè¨€åŒºåŸŸæ ·å¼ä¼˜åŒ– */
        .poem-container {
            padding: 1rem 0;
            margin-bottom: 1.5rem;
            max-width: 100%;
        }

        #poemText {
            line-height: 1.6;
            font-size: 1.1rem;
            letter-spacing: 0.05em;
        }

        /* ä¸»è§‚é¢˜/å®¢è§‚é¢˜åˆ‡æ¢æŒ‰é’®æ ·å¼ */
        .exam-switch-btn {
            padding: 4px 10px; /* å¾®è°ƒå†…è¾¹è·ï¼Œé€‚é…åŒè¡Œæ˜¾ç¤º */
            border-radius: 999px;
            border: 1px solid var(--glass-border);
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.8rem; /* å¾®è°ƒå­—ä½“å¤§å° */
            white-space: nowrap;
        }

        .exam-switch-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            box-shadow: 0 0 8px var(--accent-glow);
        }

        /* é¡¶éƒ¨åŠŸèƒ½æŒ‰é’®ç»„ä¼˜åŒ– - æ ¸å¿ƒä¿®æ”¹ï¼šå¼ºåˆ¶åŒè¡Œæ˜¾ç¤º */
        .top-function-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 6px; /* ç»Ÿä¸€é—´è· */
            flex-wrap: nowrap !important; /* å¼ºåˆ¶ä¸æ¢è¡Œ */
            margin-top: 12px;
            width: 100%;
            overflow-x: auto; /* å°å±å¹•ä¸‹å…è®¸æ¨ªå‘æ»šåŠ¨ */
            padding: 4px 0;
        }
        
        /* éšè—æ¨ªå‘æ»šåŠ¨æ¡ä½†ä¿ç•™æ»šåŠ¨åŠŸèƒ½ */
        .top-function-group::-webkit-scrollbar {
            display: none;
        }
        
        /* è°ƒæ•´è€ƒè¯•é˜¶æ®µæ ‡ç­¾æ ·å¼ */
        #examPhase {
            font-size: 0.75rem;
            padding: 3px 8px;
            white-space: nowrap;
        }
        
        /* è°ƒæ•´åˆ‡æ¢ä¸»é¢˜æŒ‰é’®æ ·å¼ */
        .theme-switch-btn {
            font-size: 0.75rem;
            padding: 3px 8px;
            white-space: nowrap;
        }

        /* ========== ä¿®å¤è§†é¢‘/é¢˜åº“åŒºé¡¶éƒ¨é®æŒ¡é—®é¢˜ ========== */
        #videoAreaLayer {
            justify-content: flex-start !important;
            padding: 2rem 1rem !important;
            max-height: 95vh !important;
            margin: 1rem auto !important;
        }

        #questionBankLayer {
            justify-content: flex-start !important;
            padding: 2rem 1rem !important;
            max-height: 95vh !important;
            margin: 1rem auto !important;
        }

        /* ç•ªèŒ„é’Ÿæç¤ºæ–‡æœ¬æ ·å¼ä¼˜åŒ– - ç¡®ä¿ä¸¤è¡Œå±…ä¸­ */
        #pomoTipText {
            line-height: 1.8; /* å¢åŠ è¡Œé«˜æå‡å¯è¯»æ€§ */
            text-align: center !important; /* å¼ºåˆ¶å±…ä¸­ */
            white-space: pre-line; /* æ”¯æŒæ¢è¡Œç¬¦ */
        }
    
        /* å¡ç‰‡è¿›å…¥åŠ¨ç”» */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .course-card-enter {
            animation: slideInUp 0.4s ease-out forwards;
        }

        /* ç­›é€‰æŒ‰é’®æ¿€æ´»çŠ¶æ€ */
        .filter-btn.active,
        .filter-btn-sub.active {
            box-shadow: 0 0 12px var(--accent-glow);
        }

        /* æœºæ„å›¾æ ‡æ‚¬åœæ•ˆæœ */
        .inst-icon {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .group:hover .inst-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
    </style>
<base target="_blank">
</head>
<body>

    <!-- åŠ¨æ€èƒŒæ™¯Canvas -->
    <canvas id="bgCanvas"></canvas>

    <!-- ä¸»å®¹å™¨ - æ–°å¢ä¸“å±classç¡®ä¿å±…ä¸­ -->
    <div class="main-container">
        
        <!-- ä¸»å¡ç‰‡ -->
        <div class="glass-card" id="mainCard">
            
            <!-- é¡¶éƒ¨ï¼šæ ‡é¢˜ä¸åŠŸèƒ½æŒ‰é’® -->
            <div class="text-center mb-6">
                <h1 class="title-calligraphy">
                    2026æ³•å¾‹èŒä¸šèµ„æ ¼è€ƒè¯•
                </h1>
                <!-- æ ¸å¿ƒä¿®æ”¹ï¼šæ·»åŠ ä¸“å±classå¹¶è°ƒæ•´ç»“æ„ -->
                <div class="top-function-group">
                    <span id="examPhase" class="text-xs px-3 py-1 rounded-full bg-[var(--primary-color)] text-white opacity-90">
                        å®¢è§‚é¢˜å¤‡è€ƒä¸­
                    </span>
                    <!-- ä¸»è§‚é¢˜/å®¢è§‚é¢˜åˆ‡æ¢æŒ‰é’® -->
                    <div class="flex rounded-full border border-[var(--glass-border)] overflow-hidden">
                        <button id="objBtn" class="exam-switch-btn active text-xs px-2 py-1" onclick="switchExamType(true)">
                            å®¢è§‚é¢˜
                        </button>
                        <button id="subBtn" class="exam-switch-btn text-xs px-2 py-1" onclick="switchExamType(false)">
                            ä¸»è§‚é¢˜
                        </button>
                    </div>
                    <button onclick="switchTheme()" class="theme-switch-btn text-xs px-2 py-1 rounded-full border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)]">
                        åˆ‡æ¢ä¸»é¢˜
                    </button>
                </div>
            </div>

            <!-- åè¨€åŒºåŸŸ -->
            <div class="poem-container relative mb-6 cursor-pointer select-none" id="poemContainer">
                <div class="absolute top-0 left-0 text-4xl opacity-20 font-serif">"</div>
                <p id="poemText" class="text-center text-lg md:text-xl font-serif italic text-[var(--text-main)] py-2 px-6 leading-relaxed">
                    åƒæ·˜ä¸‡æ¼‰è™½è¾›è‹¦ï¼Œå¹å°½ç‹‚æ²™å§‹åˆ°é‡‘
                </p>
                <div class="absolute bottom-0 right-0 text-4xl opacity-20 font-serif rotate-180">"</div>
            </div>

            <!-- å€’è®¡æ—¶ä¸»ä½“ -->
            <div class="countdown-section text-center mb-8">
                <div class="text-sm text-[var(--text-muted)] mb-4 tracking-widest uppercase" id="countdownTitle">
                    è·å®¢è§‚é¢˜è€ƒè¯•è¿˜æœ‰
                </div>
                
                <!-- å¤©æ•°/å‘¨æ•°åˆ‡æ¢åŒºåŸŸ -->
                <div class="mb-6" onclick="toggleDayWeek()">
                    <div class="text-6xl md:text-7xl font-bold font-sans text-[var(--text-main)] tracking-tighter" id="dayNum" style="text-shadow: 0 4px 20px var(--accent-glow);">
                        0
                    </div>
                    <div class="text-sm text-[var(--text-muted)] mt-1 tracking-[0.5em] uppercase" id="dayLabel">å¤©</div>
                </div>

                <!-- æ—¶åˆ†ç§’ - ç¿»ç‰Œæ—¶é’Ÿ -->
                <div class="flex justify-center items-center gap-3 md:gap-4">
                    <div class="text-center">
                        <div class="flip-clock" id="hourBox" onclick="clockClickEffect(this)">
                            <div class="flip-clock-inner" id="hourVal">00</div>
                        </div>
                        <div class="text-xs text-[var(--text-muted)] mt-2 tracking-widest">æ—¶</div>
                    </div>
                    <div class="text-2xl font-bold text-[var(--text-main)] mb-6">:</div>
                    <div class="text-center">
                        <div class="flip-clock" id="minuteBox" onclick="clockClickEffect(this)">
                            <div class="flip-clock-inner" id="minuteVal">00</div>
                        </div>
                        <div class="text-xs text-[var(--text-muted)] mt-2 tracking-widest">åˆ†</div>
                    </div>
                    <div class="text-2xl font-bold text-[var(--text-main)] mb-6">:</div>
                    <div class="text-center">
                        <div class="flip-clock" id="secondBox" onclick="clockClickEffect(this)">
                            <div class="flip-clock-inner" id="secondVal">00</div>
                        </div>
                        <div class="text-xs text-[var(--text-muted)] mt-2 tracking-widest">ç§’</div>
                    </div>
                </div>
            </div>

            <!-- é‡Œç¨‹ç¢‘è¿›åº¦ -->
            <div class="mb-8 px-2">
                <div class="flex justify-between text-xs text-[var(--text-muted)] mb-2">
                    <span>åŸºç¡€é˜¶æ®µ</span>
                    <span>å¼ºåŒ–é˜¶æ®µ</span>
                    <span>å†²åˆºé˜¶æ®µ</span>
                    <span>è€ƒè¯•</span>
                </div>
                <div class="milestone-track">
                    <div class="milestone-fill" id="milestoneFill" style="width: 0%"></div>
                    <div class="milestone-node" style="left: 0%" data-index="0"></div>
                    <div class="milestone-node" style="left: 33%" data-index="1"></div>
                    <div class="milestone-node" style="left: 66%" data-index="2"></div>
                    <div class="milestone-node active" style="left: 100%" data-index="3"></div>
                </div>
            </div>

            <!-- æ“ä½œæŒ‰é’®åŒºï¼šæ–°å¢è§†é¢‘å­¦ä¹ ã€é¢˜åº“ç»ƒä¹ æŒ‰é’® -->
            <div class="flex justify-center mb-6 gap-3 flex-wrap">
                <button onclick="togglePomodoro()" class="btn-interactive flex items-center gap-2 px-6 py-3 rounded-2xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--text-main)] hover:bg-[var(--glass-bg)]/80">
                    <svg class="w-5 h-5 text-[var(--primary-color)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-sm font-medium">ä¸“æ³¨æ¨¡å¼</span>
                </button>
                <button onclick="toggleVideoArea()" class="btn-interactive flex items-center gap-2 px-6 py-3 rounded-2xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--text-main)] hover:bg-[var(--glass-bg)]/80">
                    <svg class="w-5 h-5 text-[var(--primary-color)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-sm font-medium">è§†é¢‘å­¦ä¹ </span>
                </button>
                <button onclick="toggleQuestionBank()" class="btn-interactive flex items-center gap-2 px-6 py-3 rounded-2xl bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--text-main)] hover:bg-[var(--glass-bg)]/80">
                    <svg class="w-5 h-5 text-[var(--primary-color)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    </svg>
                    <span class="text-sm font-medium">é¢˜åº“ç»ƒä¹ </span>
                </button>
            </div>

            <!-- æ³•è€ƒåŠ æ²¹æŒ‰é’®ï¼ˆé›†æˆéŸ³ä¹æ’­æ”¾ï¼‰ -->
            <button onclick="toggleCheer()" id="cheerBtn" class="w-full py-4 rounded-2xl cheer-btn text-white font-bold tracking-[0.3em] shadow-lg hover:shadow-xl transform transition hover:-translate-y-0.5 active:translate-y-0 btn-interactive text-lg flex items-center justify-center gap-2">
                <span id="musicIcon">ğŸµ</span>
                <span>æ³•è€ƒåŠ æ²¹</span>
            </button>

            <!-- é¼“åŠ±æ¶ˆæ¯æ˜¾ç¤ºåŒº -->
            <div id="encourageMsg" class="mt-4 text-center text-sm font-serif text-[var(--text-main)] opacity-0 transition-opacity duration-500 h-6">
                åšæŒå°±æ˜¯èƒœåˆ©ï¼
            </div>
        </div>

        <!-- ç•ªèŒ„é’Ÿè¦†ç›–å±‚ -->
        <div id="pomodoroLayer" class="hidden-section absolute inset-0 z-20 glass-card flex flex-col items-center justify-center p-8">
            <h3 class="text-2xl font-bold text-[var(--text-main)] mb-4">ä¸“æ³¨æ—¶åˆ»</h3>
            
            <!-- ç•ªèŒ„é’Ÿè‡ªå®šä¹‰æ—¶é—´è¾“å…¥æ¡† -->
            <div class="mb-6 flex items-center justify-center gap-2">
                <input type="number" id="pomoCustomTime" min="1" max="60" placeholder="è‡ªå®šä¹‰åˆ†é’Ÿæ•°" 
                       class="w-24 px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--text-main)] text-center">
                <button onclick="setCustomPomodoroTime()" 
                        class="px-3 py-2 rounded-lg bg-[var(--primary-color)] text-white text-sm">ç¡®è®¤</button>
            </div>
            
            <div class="relative w-48 h-48 mb-8">
                <svg class="w-full h-full" viewBox="0 0 100 100">
                    <circle class="text-gray-200 opacity-20" stroke-width="4" stroke="currentColor" fill="transparent" r="46" cx="50" cy="50"/>
                    <circle id="pomoProgress" class="pomodoro-circle text-[var(--primary-color)]" stroke-width="4" stroke-linecap="round" stroke="currentColor" fill="transparent" r="46" cx="50" cy="50" stroke-dasharray="289" stroke-dashoffset="0"/>
                </svg>
                <div class="absolute inset-0 flex items-center justify-center">
                    <span id="pomoTime" class="text-4xl font-mono font-bold text-[var(--text-main)]">25:00</span>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="startPomodoro()" id="pomoStartBtn" class="px-8 py-3 rounded-full bg-[var(--primary-color)] text-white font-bold shadow-lg hover:shadow-xl transition">
                    å¼€å§‹
                </button>
                <button onclick="togglePomodoro()" class="px-8 py-3 rounded-full bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--text-main)] font-bold">
                    å…³é—­
                </button>
            </div>
            <p class="mt-6 text-sm text-[var(--text-muted)] text-center" id="pomoTipText">
                ä¿æŒä¸“æ³¨ï¼Œ25åˆ†é’ŸåçŸ­æš‚ä¼‘æ¯
                æ³•å¾‹äººçš„è‡ªå¾‹ä»æ¯ä¸€åˆ»å¼€å§‹
            </p>
        </div>

        <!-- è§†é¢‘å­¦ä¹ è¦†ç›–å±‚ -->
        <div id="videoAreaLayer" class="hidden-section absolute inset-0 z-20 glass-card flex flex-col items-center p-8 overflow-y-auto"><div class="flex items-center justify-center gap-2 mb-4">
                <svg class="w-6 h-6 text-[var(--primary-color)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h3 class="text-2xl font-bold text-[var(--text-main)]">æ³•è€ƒè§†é¢‘å­¦ä¹ </h3>
            </div>

            <!-- ç­›é€‰æ  - ç´§å‡‘å‹è®¾è®¡ -->
            <div class="w-full max-w-md mb-4 bg-[var(--glass-bg)] backdrop-blur-md p-3 rounded-xl border border-[var(--glass-border)] shadow-lg">
                <!-- å¤´éƒ¨ï¼šæ ‡é¢˜å’Œé‡ç½® -->
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-[var(--primary-color)] bg-opacity-20 flex items-center justify-center">
                            <svg class="w-4 h-4 text-[var(--primary-color)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                            </svg>
                        </div>
                        <span class="text-sm font-bold text-[var(--text-main)]">ç­›é€‰è¯¾ç¨‹</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-xs text-[var(--text-muted)]" id="courseStats">å…± 36 é—¨</span>
                        <button onclick="resetVideoFilters()" class="text-xs px-2 py-1 rounded-full bg-[var(--primary-color)] text-white hover:opacity-80 transition-opacity">
                            é‡ç½®
                        </button>
                    </div>
                </div>

                <!-- æœºæ„ç­›é€‰ - æ›´ç´§å‡‘ -->
                <div class="mb-2">
                    <div class="flex flex-wrap gap-1.5" id="institutionFilters">
                        <button onclick="filterByInstitution('all')" class="filter-btn active px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] bg-[var(--primary-color)] text-white transition-all whitespace-nowrap flex items-center gap-1" data-filter="all">
                            <span class="w-1.5 h-1.5 rounded-full bg-white"></span>å…¨éƒ¨
                        </button>
                        <button onclick="filterByInstitution('ä¼—åˆæ•™è‚²')" class="filter-btn px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap flex items-center gap-1" data-filter="ä¼—åˆæ•™è‚²">
                            <span class="w-1.5 h-1.5 rounded-full bg-blue-500"></span>ä¼—åˆ
                        </button>
                        <button onclick="filterByInstitution('åšå¤§æ³•è€ƒ')" class="filter-btn px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap flex items-center gap-1" data-filter="åšå¤§æ³•è€ƒ">
                            <span class="w-1.5 h-1.5 rounded-full bg-amber-500"></span>åšå¤§
                        </button>
                        <button onclick="filterByInstitution('å¬è¿‡æ³•è€ƒ')" class="filter-btn px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap flex items-center gap-1" data-filter="å¬è¿‡æ³•è€ƒ">
                            <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>å¬è¿‡
                        </button>
                        <button onclick="filterByInstitution('ç‘è¾¾æ³•è€ƒ')" class="filter-btn px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap flex items-center gap-1" data-filter="ç‘è¾¾æ³•è€ƒ">
                            <span class="w-1.5 h-1.5 rounded-full bg-purple-500"></span>ç‘è¾¾
                        </button>
                        <button onclick="filterByInstitution('è§‰æ™“æ³•è€ƒ')" class="filter-btn px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap flex items-center gap-1" data-filter="è§‰æ™“æ³•è€ƒ">
                            <span class="w-1.5 h-1.5 rounded-full bg-rose-500"></span>è§‰æ™“
                        </button>
                    </div>
                </div>

                <!-- ç§‘ç›®ç­›é€‰ - æ›´ç´§å‡‘ -->
                <div>
                    <div class="flex flex-wrap gap-1.5" id="subjectFilters">
                        <button onclick="filterBySubject('all')" class="filter-btn-sub active px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] bg-[var(--primary-color)] text-white transition-all whitespace-nowrap" data-filter="all">å…¨éƒ¨</button>
                        <button onclick="filterBySubject('ä¸‰å›½æ³•')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="ä¸‰å›½æ³•">ä¸‰å›½</button>
                        <button onclick="filterBySubject('åˆ‘æ³•')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="åˆ‘æ³•">åˆ‘æ³•</button>
                        <button onclick="filterBySubject('åˆ‘è¯‰æ³•')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="åˆ‘è¯‰æ³•">åˆ‘è¯‰</button>
                        <button onclick="filterBySubject('å•†ç»æ³•')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="å•†ç»æ³•">å•†ç»</button>
                        <button onclick="filterBySubject('å•†ç»çŸ¥')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="å•†ç»çŸ¥">å•†çŸ¥</button>
                        <button onclick="filterBySubject('æ°‘æ³•')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="æ°‘æ³•">æ°‘æ³•</button>
                        <button onclick="filterBySubject('æ°‘è¯‰æ³•')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="æ°‘è¯‰æ³•">æ°‘è¯‰</button>
                        <button onclick="filterBySubject('ç†è®ºæ³•')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="ç†è®ºæ³•">ç†è®º</button>
                        <button onclick="filterBySubject('è¡Œæ”¿æ³•')" class="filter-btn-sub px-2 py-1 rounded-full text-xs border border-[var(--glass-border)] text-[var(--text-muted)] hover:bg-[var(--glass-bg)] transition-all whitespace-nowrap" data-filter="è¡Œæ”¿æ³•">è¡Œæ”¿</button>
                    </div>
                </div>
            </div>

            <!-- è¯¾ç¨‹å¡ç‰‡ç½‘æ ¼ -->
            <div class="w-full max-w-md grid grid-cols-1 gap-4 pb-8" id="courseGrid">
                <!-- è¯¾ç¨‹å¡ç‰‡ç”±JSåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <button onclick="toggleVideoArea()" class="mt-4 px-8 py-3 rounded-full bg-gradient-to-r from-[var(--primary-color)] to-purple-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-105 transition-all">
                å…³é—­
            </button></div>

        <!-- é¢˜åº“ç»ƒä¹ è¦†ç›–å±‚ -->
        <div id="questionBankLayer" class="hidden-section absolute inset-0 z-20 glass-card flex flex-col items-center p-8 overflow-y-auto">
            <h3 class="text-2xl font-bold text-[var(--text-main)] mb-6">æ³•è€ƒé¢˜åº“ç»ƒä¹ </h3>
            <div class="w-full max-w-md space-y-4">
                <!-- ç«¹é©¬ -->
                <div class="bg-[var(--card-bg)] border border-[var(--glass-border)] rounded-xl p-4 transition-all hover:shadow-lg hover:shadow-[var(--accent-glow)]">
                    <h4 class="text-lg font-bold text-[var(--text-main)] mb-3">ç«¹é©¬</h4>
                    <a href="https://www.zhumavip.com/w/questionBank" target="_blank" class="block w-full text-center py-2 rounded-lg bg-[var(--primary-color)] text-white text-sm hover:opacity-90 transition-opacity">
                        è¿›å…¥é¢˜åº“ç»ƒä¹ 
                    </a>
                </div>
                <!-- è§‰æ™“ -->
                <div class="bg-[var(--card-bg)] border border-[var(--glass-border)] rounded-xl p-4 transition-all hover:shadow-lg hover:shadow-[var(--accent-glow)]">
                    <h4 class="text-lg font-bold text-[var(--text-main)] mb-3">è§‰æ™“</h4>
                    <a href="https://www.juexiaotime.com/study?mockType=1" target="_blank" class="block w-full text-center py-2 rounded-lg bg-[var(--primary-color)] text-white text-sm hover:opacity-90 transition-opacity">
                        è¿›å…¥é¢˜åº“ç»ƒä¹ 
                    </a>
                </div>
                <!-- ç‘è¾¾ -->
                <div class="bg-[var(--card-bg)] border border-[var(--glass-border)] rounded-xl p-4 transition-all hover:shadow-lg hover:shadow-[var(--accent-glow)]">
                    <h4 class="text-lg font-bold text-[var(--text-main)] mb-3">ç‘è¾¾</h4>
                    <a href="https://www.ruidaedu.com/website/questionBank" target="_blank" class="block w-full text-center py-2 rounded-lg bg-[var(--primary-color)] text-white text-sm hover:opacity-90 transition-opacity">
                        è¿›å…¥é¢˜åº“ç»ƒä¹ 
                    </a>
                </div>
                <!-- åšå¤§ -->
                <div class="bg-[var(--card-bg)] border border-[var(--glass-border)] rounded-xl p-4 transition-all hover:shadow-lg hover:shadow-[var(--accent-glow)]">
                    <h4 class="text-lg font-bold text-[var(--text-main)] mb-3">åšå¤§</h4>
                    <a href="https://atk.houdask.com/hdapp/static/www/index.html" target="_blank" class="block w-full text-center py-2 rounded-lg bg-[var(--primary-color)] text-white text-sm hover:opacity-90 transition-opacity">
                        è¿›å…¥é¢˜åº“ç»ƒä¹ 
                    </a>
                </div>
            </div>
            <button onclick="toggleQuestionBank()" class="mt-8 px-8 py-3 rounded-full bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--text-main)] font-bold">
                å…³é—­
            </button>
        </div>

    </div>

    <!-- æç¤ºæ¶ˆæ¯ -->
    <div class="toast" id="toast"></div>
    
    <!-- æ—¶é—´æ¿€åŠ±è¯­æµ®å±‚ -->
    <div class="time-motivation" id="timeMotivation"></div>

    <script>
        /* ========== æ•°æ®é…ç½® ========== */
        const EXAM_DATE_OBJ = new Date("2026-09-12T09:00:00").getTime(); // å®¢è§‚é¢˜
        const EXAM_DATE_SUB = new Date("2026-10-18T09:00:00").getTime(); // ä¸»è§‚é¢˜
        const START_DATE = new Date("2026-02-24").getTime(); // å¤‡è€ƒå¼€å§‹æ—¶é—´
        
        const POEMS = [
            { type: 'poem', text: "åƒæ·˜ä¸‡æ¼‰è™½è¾›è‹¦ï¼Œå¹å°½ç‹‚æ²™å§‹åˆ°é‡‘" },
            { type: 'poem', text: "é•¿é£ç ´æµªä¼šæœ‰æ—¶ï¼Œç›´æŒ‚äº‘å¸†æµæ²§æµ·" },
            { type: 'poem', text: "åšè§‚è€Œçº¦å–ï¼Œåšç§¯è€Œè–„å‘" },
            { type: 'poem', text: "æ˜Ÿå…‰ä¸è´Ÿèµ¶è·¯äººï¼Œæ—¶å…‰ä¸è´Ÿæœ‰å¿ƒäºº" },
            { type: 'poem', text: "é“é˜»ä¸”é•¿ï¼Œè¡Œåˆ™å°†è‡³ï¼›è¡Œè€Œä¸è¾ï¼Œæœªæ¥å¯æœŸ" },
            { type: 'poem', text: "ç»³é”¯æœ¨æ–­ï¼Œæ°´æ»´çŸ³ç©¿" },
            { type: 'poem', text: "å®å‰‘é”‹ä»ç£¨ç ºå‡ºï¼Œæ¢…èŠ±é¦™è‡ªè‹¦å¯’æ¥" },
            { type: 'law', text: "æ³•å¾‹ä¸ä¿æŠ¤æƒåˆ©ä¸Šçš„ç¡çœ è€…" },
            { type: 'law', text: "æ­£ä¹‰ä¸ä»…åº”å¾—åˆ°å®ç°ï¼Œè€Œä¸”è¦ä»¥äººä»¬çœ‹å¾—è§çš„æ–¹å¼åŠ ä»¥å®ç°" },
            { type: 'law', text: "æ²¡æœ‰æ— ä¹‰åŠ¡çš„æƒåˆ©ï¼Œä¹Ÿæ²¡æœ‰æ— æƒåˆ©çš„ä¹‰åŠ¡" },
            { type: 'law', text: "æ³•æ— æˆæƒä¸å¯ä¸ºï¼Œæ³•æ— ç¦æ­¢å³å¯ä¸º" },
            { type: 'law', text: "æ³•å¾‹çš„ç”Ÿå‘½åœ¨äºç»éªŒï¼Œè€Œä¸åœ¨äºé€»è¾‘" }
        ];

        const ENCOURAGES = [
            "åšæŒå°±æ˜¯èƒœåˆ©ï¼",
            "ä»Šå¤©çš„åŠªåŠ›ï¼Œæ˜¯æ˜å¤©çš„å®åŠ›ï¼",
            "æ¯ä¸€æ­¥éƒ½ç®—æ•°ï¼",
            "ä½ ç¦»æ¢¦æƒ³åˆè¿‘äº†ä¸€æ­¥ï¼",
            "ç¨³ä½ï¼Œæˆ‘ä»¬èƒ½èµ¢ï¼",
            "ä½ æ˜¯æœ€æ£’çš„æ³•è€ƒäººï¼",
            "åšç§¯è–„å‘ï¼Œä¸€é¸£æƒŠäººï¼",
            "ç›¸ä¿¡è‡ªå·±ï¼Œä½ èƒ½è¡Œï¼",
            "æ³•æ²»ç†æƒ³ï¼Œç”±ä½ å®ˆæŠ¤ï¼",
            "å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€ï¼"
        ];

        // ä¸æ—¶é—´ç›¸å…³çš„æ¿€åŠ±è¯­
        const TIME_MOTIVATIONS = [
            "æ¯ä¸€åˆ†é’Ÿçš„åŠªåŠ›ï¼Œéƒ½è®©ä½ ç¦»æˆåŠŸæ›´è¿‘",
            "çæƒœæ—¶é—´ï¼Œå°±æ˜¯çæƒœæœªæ¥çš„è‡ªå·±",
            "æ—¶é—´ä¸ä¼šè¾œè´Ÿç”¨å¿ƒçš„äºº",
            "ä¸€å‘¨çš„åšæŒï¼Œèƒœè¿‡ç™¾æ—¥çš„ç©ºæƒ³",
            "æŠŠæ¡å½“ä¸‹çš„æ¯ä¸€ç§’ï¼Œæ³•è€ƒè·¯ä¸Šä¸è¿·èŒ«",
            "å€’è®¡æ—¶çš„æ•°å­—ï¼Œæ˜¯ä½ å‰è¡Œçš„å‹‹ç« ",
            "ç”¨ä¸“æ³¨çš„æ—¶å…‰ï¼Œæ¢æœªæ¥çš„å¦é€”",
            "æ—¶é—´æœ‰é™ï¼Œæ•ˆç‡æ— é™",
            "æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œè€ƒè¯•è½»æ¾ä¸€ç‚¹ç‚¹",
            "æ—¶å…‰ä¸è¯­ï¼Œé™å¾…èŠ±å¼€"
        ];

        const THEMES = ['default', 'sunrise', 'eyecare'];
        const BG_MODES = ['stars', 'rain', 'ink'];

        /* ========== çŠ¶æ€ç®¡ç† ========== */
        let currentState = {
            theme: 0,
            bgMode: 0,
            poemIndex: 0,
            isPlaying: false, // éŸ³ä¹æ’­æ”¾çŠ¶æ€
            isObjective: true, // é»˜è®¤ä¸ºå®¢è§‚é¢˜
            pomoRunning: false,
            pomoTime: 25 * 60, // ç•ªèŒ„é’Ÿç§’æ•°
            pomoOriginalTime: 25 * 60, // ä¿å­˜åŸå§‹æ—¶é—´
            pomoInterval: null,
            showWeek: false // æ˜¯å¦æ˜¾ç¤ºå‘¨æ•°ï¼ˆé»˜è®¤æ˜¾ç¤ºå¤©æ•°ï¼‰
        };

        // éŸ³é¢‘ç›¸å…³ - å¾ªç¯æ’­æ”¾
        let audio = null;
        
        /* ========== å·¥å…·å‡½æ•° ========== */
        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message, duration = 2000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // æ˜¾ç¤ºæ—¶é—´æ¿€åŠ±è¯­
        function showTimeMotivation() {
            const motivationEl = document.getElementById('timeMotivation');
            const randomIndex = Math.floor(Math.random() * TIME_MOTIVATIONS.length);
            motivationEl.textContent = TIME_MOTIVATIONS[randomIndex];
            motivationEl.classList.add('show');
            
            setTimeout(() => {
                motivationEl.classList.remove('show');
            }, 5000);
        }

        // åˆ‡æ¢åè¨€
        function changePoem() {
            currentState.poemIndex = (currentState.poemIndex + 1) % POEMS.length;
            const poem = POEMS[currentState.poemIndex];
            document.getElementById('poemText').textContent = poem.text;
        }

        // åˆ‡æ¢ä¸»é¢˜
        function switchTheme() {
            currentState.theme = (currentState.theme + 1) % THEMES.length;
            document.body.setAttribute('data-theme', THEMES[currentState.theme]);
            showToast(`å·²åˆ‡æ¢è‡³${['é»˜è®¤ä¸»é¢˜', 'æ—¥å‡ºæ¨¡å¼', 'æŠ¤çœ¼æ¨¡å¼'][currentState.theme]}`);
            // åŒæ­¥åˆ‡æ¢èƒŒæ™¯æ¨¡å¼
            currentState.bgMode = (currentState.bgMode + 1) % BG_MODES.length;
            initBackground();
        }

        // åˆ‡æ¢è€ƒè¯•ç±»å‹ï¼ˆå®¢è§‚é¢˜/ä¸»è§‚é¢˜ï¼‰
        function switchExamType(isObjective) {
            currentState.isObjective = isObjective;
            document.getElementById('objBtn').classList.toggle('active', isObjective);
            document.getElementById('subBtn').classList.toggle('active', !isObjective);
            document.getElementById('countdownTitle').textContent = isObjective 
                ? 'è·å®¢è§‚é¢˜è€ƒè¯•è¿˜æœ‰' 
                : 'è·ä¸»è§‚é¢˜è€ƒè¯•è¿˜æœ‰';
            document.getElementById('examPhase').textContent = isObjective
                ? 'å®¢è§‚é¢˜å¤‡è€ƒä¸­'
                : 'ä¸»è§‚é¢˜å¤‡è€ƒä¸­';
            // é‡æ–°è®¡ç®—å€’è®¡æ—¶
            updateCountdown();
            showToast(isObjective ? 'å·²åˆ‡æ¢ä¸ºå®¢è§‚é¢˜å€’è®¡æ—¶' : 'å·²åˆ‡æ¢ä¸ºä¸»è§‚é¢˜å€’è®¡æ—¶');
        }

        // åˆ‡æ¢å¤©æ•°/å‘¨æ•°æ˜¾ç¤º
        function toggleDayWeek() {
            currentState.showWeek = !currentState.showWeek;
            document.getElementById('dayLabel').textContent = currentState.showWeek ? 'å‘¨' : 'å¤©';
            updateCountdown();
            showToast(currentState.showWeek ? 'å·²åˆ‡æ¢ä¸ºå‘¨æ•°æ˜¾ç¤º' : 'å·²åˆ‡æ¢ä¸ºå¤©æ•°æ˜¾ç¤º');
            // æ˜¾ç¤ºæ—¶é—´æ¿€åŠ±è¯­
            showTimeMotivation();
        }

        // ç¿»ç‰Œæ—¶é’Ÿç‚¹å‡»æ•ˆæœ
        function clockClickEffect(element) {
            element.classList.add('clicked');
            setTimeout(() => {
                element.classList.remove('clicked');
            }, 500);
            // éšæœºæ˜¾ç¤ºæ—¶é—´æ¿€åŠ±è¯­
            showTimeMotivation();
        }

        // æ›´æ–°ç•ªèŒ„é’Ÿæç¤ºæ–‡æœ¬
        function updatePomodoroTipText() {
            const minutes = Math.floor(currentState.pomoOriginalTime / 60);
            const tipText = `ä¿æŒä¸“æ³¨ï¼Œ${minutes}åˆ†é’ŸåçŸ­æš‚ä¼‘æ¯\næ³•å¾‹äººçš„è‡ªå¾‹ä»æ¯ä¸€åˆ»å¼€å§‹`;
            document.getElementById('pomoTipText').textContent = tipText;
        }

        // ç•ªèŒ„é’Ÿç›¸å…³
        function togglePomodoro() {
            const layer = document.getElementById('pomodoroLayer');
            layer.classList.toggle('hidden-section');
            if (!layer.classList.contains('hidden-section')) {
                // é‡ç½®ç•ªèŒ„é’Ÿ
                resetPomodoro();
                showToast('ä¸“æ³¨æ¨¡å¼å·²å¼€å¯ï¼Œå¼€å§‹é«˜æ•ˆå­¦ä¹ å§ï¼');
            } else {
                stopPomodoro();
            }
        }

        function resetPomodoro() {
            stopPomodoro();
            currentState.pomoTime = currentState.pomoOriginalTime;
            updatePomodoroDisplay();
            // æ›´æ–°æç¤ºæ–‡æœ¬ï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼‰
            updatePomodoroTipText();
            document.getElementById('pomoStartBtn').textContent = 'å¼€å§‹';
        }

        function setCustomPomodoroTime() {
            const input = document.getElementById('pomoCustomTime');
            const minutes = parseInt(input.value);
            if (isNaN(minutes) || minutes < 1 || minutes > 60) {
                showToast('è¯·è¾“å…¥1-60ä¹‹é—´çš„æœ‰æ•ˆæ•°å­—');
                return;
            }
            currentState.pomoTime = minutes * 60;
            currentState.pomoOriginalTime = minutes * 60;
            updatePomodoroDisplay();
            // æ›´æ–°æç¤ºæ–‡æœ¬ï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼‰
            updatePomodoroTipText();
            input.value = '';
            showToast(`å·²è®¾ç½®ä¸º${minutes}åˆ†é’Ÿä¸“æ³¨æ—¶é•¿`);
        }

        function updatePomodoroDisplay() {
            const minutes = Math.floor(currentState.pomoTime / 60);
            const seconds = currentState.pomoTime % 60;
            const displayTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('pomoTime').textContent = displayTime;
            
            // æ›´æ–°è¿›åº¦æ¡
            const circumference = 2 * Math.PI * 46;
            const progress = currentState.pomoTime / currentState.pomoOriginalTime;
            const dashoffset = circumference * (1 - progress);
            document.getElementById('pomoProgress').style.strokeDashoffset = dashoffset;
        }

        function startPomodoro() {
            if (currentState.pomoRunning) {
                // æš‚åœ
                clearInterval(currentState.pomoInterval);
                currentState.pomoRunning = false;
                document.getElementById('pomoStartBtn').textContent = 'ç»§ç»­';
                showToast('ä¸“æ³¨è®¡æ—¶å·²æš‚åœ');
            } else {
                // å¼€å§‹/ç»§ç»­
                currentState.pomoRunning = true;
                document.getElementById('pomoStartBtn').textContent = 'æš‚åœ';
                showToast('ä¸“æ³¨è®¡æ—¶å·²å¼€å§‹');
                
                currentState.pomoInterval = setInterval(() => {
                    currentState.pomoTime--;
                    updatePomodoroDisplay();
                    
                    if (currentState.pomoTime <= 0) {
                        stopPomodoro();
                        showToast('ä¸“æ³¨æ—¶é—´ç»“æŸï¼ä¼‘æ¯ä¸€ä¸‹å§');
                        // å®Œæˆåçš„æç¤ºæ–‡æœ¬
                        const minutes = Math.floor(currentState.pomoOriginalTime / 60);
                        document.getElementById('pomoTipText').textContent = `æ­å–œå®Œæˆ${minutes}åˆ†é’Ÿä¸“æ³¨ä»»åŠ¡ï¼\né€‚å½“ä¼‘æ¯åç»§ç»­åŠ æ²¹`;
                    }
                }, 1000);
            }
        }

        function stopPomodoro() {
            if (currentState.pomoInterval) {
                clearInterval(currentState.pomoInterval);
                currentState.pomoInterval = null;
            }
            currentState.pomoRunning = false;
            document.getElementById('pomoStartBtn').textContent = 'å¼€å§‹';
        }

        // è§†é¢‘å­¦ä¹ åŒºåˆ‡æ¢
        function toggleVideoArea() {
            const layer = document.getElementById('videoAreaLayer');
            layer.classList.toggle('hidden-section');
            if (!layer.classList.contains('hidden-section')) {
                showToast('è§†é¢‘å­¦ä¹ åŒºå·²æ‰“å¼€');
            }
        }

        // é¢˜åº“ç»ƒä¹ åŒºåˆ‡æ¢
        function toggleQuestionBank() {
            const layer = document.getElementById('questionBankLayer');
            layer.classList.toggle('hidden-section');
            if (!layer.classList.contains('hidden-section')) {
                showToast('é¢˜åº“ç»ƒä¹ åŒºå·²æ‰“å¼€');
            }
        }

        // æ³•è€ƒåŠ æ²¹/éŸ³ä¹æ’­æ”¾
        function toggleCheer() {
            const btn = document.getElementById('cheerBtn');
            const icon = document.getElementById('musicIcon');
            const msgEl = document.getElementById('encourageMsg');
            
            if (!currentState.isPlaying) {
                // æ’­æ”¾éŸ³ä¹
                if (!audio) {
                    audio = new Audio('https://xingjiuyuzhou.github.io/Countdown/jxszf.mp3');
                    audio.loop = true;
                }
                audio.play().then(() => {
                    currentState.isPlaying = true;
                    btn.classList.add('playing');
                    icon.textContent = 'ğŸ¶';
                    showToast('æ³•è€ƒåŠ æ²¹ï¼éŸ³ä¹å·²æ’­æ”¾');
                    
                    // éšæœºæ˜¾ç¤ºé¼“åŠ±è¯­
                    const randomMsg = ENCOURAGES[Math.floor(Math.random() * ENCOURAGES.length)];
                    msgEl.textContent = randomMsg;
                    msgEl.style.opacity = '1';
                    
                    setTimeout(() => {
                        msgEl.style.opacity = '0';
                    }, 3000);
                }).catch(err => {
                    showToast('éŸ³ä¹æ’­æ”¾å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾');
                    // ä»æ˜¾ç¤ºé¼“åŠ±è¯­
                    const randomMsg = ENCOURAGES[Math.floor(Math.random() * ENCOURAGES.length)];
                    msgEl.textContent = randomMsg;
                    msgEl.style.opacity = '1';
                    setTimeout(() => {
                        msgEl.style.opacity = '0';
                    }, 3000);
                });
            } else {
                // æš‚åœéŸ³ä¹
                audio.pause();
                currentState.isPlaying = false;
                btn.classList.remove('playing');
                icon.textContent = 'ğŸµ';
                showToast('éŸ³ä¹å·²æš‚åœ');
            }
        }

        // æ›´æ–°å€’è®¡æ—¶
        function updateCountdown() {
            const now = new Date().getTime();
            const targetDate = currentState.isObjective ? EXAM_DATE_OBJ : EXAM_DATE_SUB;
            const distance = targetDate - now;

            if (distance < 0) {
                document.getElementById('dayNum').textContent = '0';
                document.getElementById('hourVal').textContent = '00';
                document.getElementById('minuteVal').textContent = '00';
                document.getElementById('secondVal').textContent = '00';
                document.getElementById('countdownTitle').textContent = 'è€ƒè¯•å·²å¼€å§‹';
                return;
            }

            // è®¡ç®—å¤©/å‘¨æ•°
            let days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const weeks = Math.floor(days / 7);
            
            // æ ¹æ®åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºå¤©æˆ–å‘¨
            if (currentState.showWeek) {
                document.getElementById('dayNum').textContent = weeks;
                // æ˜¾ç¤ºå‰©ä½™å¤©æ•°æç¤º
                const remainingDays = days % 7;
                if (remainingDays > 0) {
                    document.getElementById('dayLabel').textContent = `å‘¨(${remainingDays}å¤©)`;
                } else {
                    document.getElementById('dayLabel').textContent = 'å‘¨';
                }
            } else {
                document.getElementById('dayNum').textContent = days;
            }

            // è®¡ç®—æ—¶åˆ†ç§’
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // æ›´æ–°ç¿»ç‰Œæ—¶é’Ÿ
            updateFlipClock('hourVal', hours);
            updateFlipClock('minuteVal', minutes);
            updateFlipClock('secondVal', seconds);

            // æ›´æ–°é‡Œç¨‹ç¢‘è¿›åº¦
            updateMilestone(days);
        }

        // ç¿»ç‰Œæ—¶é’Ÿæ›´æ–°
        function updateFlipClock(elementId, value) {
            const el = document.getElementById(elementId);
            const box = el.parentElement;
            const formatted = value.toString().padStart(2, '0');
            
            if (el.textContent !== formatted) {
                box.classList.add('flipping');
                el.textContent = formatted;
                setTimeout(() => {
                    box.classList.remove('flipping');
                }, 600);
            }
        }

        // æ›´æ–°é‡Œç¨‹ç¢‘è¿›åº¦
        function updateMilestone(days) {
            // æ€»å¤‡è€ƒå¤©æ•°ï¼ˆä»START_DATEåˆ°EXAM_DATE_OBJï¼‰
            const totalDays = Math.floor((EXAM_DATE_OBJ - START_DATE) / (1000 * 60 * 60 * 24));
            // å·²è¿‡å¤©æ•°
            const passedDays = totalDays - days;
            // è¿›åº¦ç™¾åˆ†æ¯”
            const progress = Math.min(100, Math.max(0, (passedDays / totalDays) * 100));
            
            document.getElementById('milestoneFill').style.width = `${progress}%`;
            
            // æ›´æ–°èŠ‚ç‚¹çŠ¶æ€
            const nodes = document.querySelectorAll('.milestone-node');
            nodes.forEach((node, index) => {
                const nodePos = parseInt(node.style.left);
                if (progress >= nodePos) {
                    node.classList.add('active');
                } else {
                    node.classList.remove('active');
                }
            });
        }

        // åˆå§‹åŒ–èƒŒæ™¯Canvas
        function initBackground() {
            const canvas = document.getElementById('bgCanvas');
            const ctx = canvas.getContext('2d');
            
            // è®¾ç½®Canvaså°ºå¯¸
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // ä¸åŒèƒŒæ™¯æ¨¡å¼çš„ç»˜åˆ¶é€»è¾‘
            const bgMode = BG_MODES[currentState.bgMode];
            const isSunriseTheme = currentState.theme === 1; // æ—¥å‡ºæ¨¡å¼
            let animationFrame;

            // æ¸…ç†ä¹‹å‰çš„åŠ¨ç”»
            cancelAnimationFrame(animationFrame);

            if (bgMode === 'stars') {
                // æ˜Ÿç©ºèƒŒæ™¯
                const starCount = Math.floor(window.innerWidth / 2);
                // æ—¥å‡ºæ¨¡å¼å¢åŠ æ˜Ÿæ˜Ÿæ•°é‡å’Œå¤§å°ï¼Œæé«˜å¯è§åº¦
                const stars = [];
                const starSizeMultiplier = isSunriseTheme ? 2 : 1;
                const starAlphaMultiplier = isSunriseTheme ? 1.5 : 1;
                
                // åˆ›å»ºæ˜Ÿæ˜Ÿ
                for (let i = 0; i < starCount * (isSunriseTheme ? 1.5 : 1); i++) {
                    stars.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 1.5 * starSizeMultiplier,
                        speed: Math.random() * 0.2 + 0.1,
                        alpha: Math.random() * 0.8 + 0.2 * starAlphaMultiplier
                    });
                }

                function drawStars() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // èƒŒæ™¯æ¸å˜
                    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                    if (currentState.theme === 0) {
                        gradient.addColorStop(0, '#0f172a');
                        gradient.addColorStop(1, '#1e293b');
                    } else if (currentState.theme === 1) {
                        gradient.addColorStop(0, '#fff0e0');
                        gradient.addColorStop(1, '#ffd5b0');
                    } else {
                        gradient.addColorStop(0, '#e8f5e9');
                        gradient.addColorStop(1, '#c8e6c9');
                    }
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    // ç»˜åˆ¶æ˜Ÿæ˜Ÿ
                    stars.forEach(star => {
                        ctx.beginPath();
                        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                        // ä½¿ç”¨ä¸»é¢˜å˜é‡é¢œè‰²ï¼Œæé«˜å¯¹æ¯”åº¦
                        const effectColor = getComputedStyle(document.documentElement).getPropertyValue('--effect-color');
                        ctx.fillStyle = effectColor.replace('0.8', star.alpha.toFixed(2));
                        ctx.fill();
                        
                        // æ˜Ÿæ˜Ÿç§»åŠ¨
                        star.y += star.speed;
                        if (star.y > canvas.height) {
                            star.y = 0;
                            star.x = Math.random() * canvas.width;
                        }
                    });

                    animationFrame = requestAnimationFrame(drawStars);
                }
                drawStars();

            } else if (bgMode === 'rain') {
                // é›¨æ»´èƒŒæ™¯
                const dropCount = Math.floor(window.innerWidth / 5);
                // æ—¥å‡ºæ¨¡å¼å¢åŠ é›¨æ»´æ•°é‡å’Œé•¿åº¦ï¼Œæé«˜å¯è§åº¦
                const drops = [];
                const dropSizeMultiplier = isSunriseTheme ? 1.8 : 1;
                
                for (let i = 0; i < dropCount * (isSunriseTheme ? 2 : 1); i++) {
                    drops.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        length: Math.random() * 15 + 5 * dropSizeMultiplier,
                        speed: Math.random() * 5 + 2,
                        opacity: Math.random() * 0.5 + 0.2 * (isSunriseTheme ? 1.5 : 1)
                    });
                }

                function drawRain() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // èƒŒæ™¯æ¸å˜
                    const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                    if (currentState.theme === 0) {
                        gradient.addColorStop(0, '#0f172a');
                        gradient.addColorStop(1, '#1e293b');
                    } else if (currentState.theme === 1) {
                        gradient.addColorStop(0, '#fff0e0');
                        gradient.addColorStop(1, '#ffd5b0');
                    } else {
                        gradient.addColorStop(0, '#e8f5e9');
                        gradient.addColorStop(1, '#c8e6c9');
                    }
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    // ç»˜åˆ¶é›¨æ»´
                    drops.forEach(drop => {
                        ctx.beginPath();
                        ctx.moveTo(drop.x, drop.y);
                        ctx.lineTo(drop.x, drop.y + drop.length);
                        // ä½¿ç”¨ä¸»é¢˜å˜é‡é¢œè‰²ï¼Œæé«˜å¯¹æ¯”åº¦
                        const effectColor = getComputedStyle(document.documentElement).getPropertyValue('--effect-color');
                        ctx.strokeStyle = effectColor.replace('0.8', drop.opacity.toFixed(2));
                        ctx.lineWidth = isSunriseTheme ? 2 : 1; // æ—¥å‡ºæ¨¡å¼åŠ ç²—é›¨æ»´
                        ctx.stroke();
                        
                        // é›¨æ»´ä¸‹è½
                        drop.y += drop.speed;
                        if (drop.y > canvas.height) {
                            drop.y = -drop.length;
                            drop.x = Math.random() * canvas.width;
                        }
                    });

                    animationFrame = requestAnimationFrame(drawRain);
                }
                drawRain();

            } else if (bgMode === 'ink') {
                // æ°´å¢¨æ‰©æ•£æ•ˆæœ
                const circleCount = 5;
                // æ—¥å‡ºæ¨¡å¼å¢åŠ åœ†åœˆå¤§å°å’Œæ•°é‡ï¼Œæé«˜å¯è§åº¦
                const circles = [];
                
                for (let i = 0; i < (isSunriseTheme ? 8 : circleCount); i++) {
                    circles.push({
                        x: canvas.width / 2,
                        y: canvas.height / 2,
                        radius: Math.random() * 100 + 50 * (isSunriseTheme ? 1.5 : 1),
                        speed: Math.random() * 0.5 + 0.1,
                        alpha: Math.random() * 0.2 + 0.1 * (isSunriseTheme ? 2 : 1),
                        color: currentState.theme === 0 
                            ? 'rgba(76, 117, 230, {alpha})'
                            : currentState.theme === 1
                                ? 'rgba(255, 140, 66, {alpha})'
                                : 'rgba(93, 140, 127, {alpha})'
                    });
                }

                function drawInk() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // èƒŒæ™¯è‰²
                    if (currentState.theme === 0) {
                        ctx.fillStyle = '#0f172a';
                    } else if (currentState.theme === 1) {
                        ctx.fillStyle = '#fff0e0';
                    } else {
                        ctx.fillStyle = '#e8f5e9';
                    }
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    // ç»˜åˆ¶æ‰©æ•£çš„åœ†åœˆ
                    circles.forEach(circle => {
                        ctx.beginPath();
                        ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2);
                        const color = circle.color.replace('{alpha}', circle.alpha);
                        ctx.strokeStyle = color;
                        ctx.lineWidth = isSunriseTheme ? 3 : 2; // æ—¥å‡ºæ¨¡å¼åŠ ç²—åœ†åœˆ
                        ctx.stroke();
                        
                        // æ‰©æ•£åŠ¨ç”»
                        circle.radius += circle.speed;
                        circle.alpha -= (isSunriseTheme ? 0.0015 : 0.001);
                        
                        // é‡ç½®
                        if (circle.alpha <= 0) {
                            circle.radius = Math.random() * 50 + 20 * (isSunriseTheme ? 1.5 : 1);
                            circle.alpha = Math.random() * 0.2 + 0.1 * (isSunriseTheme ? 2 : 1);
                            circle.x = Math.random() * canvas.width;
                            circle.y = Math.random() * canvas.height;
                        }
                    });

                    animationFrame = requestAnimationFrame(drawInk);
                }
                drawInk();
            }
        }

        
        /* ========== è§†é¢‘å­¦ä¹ åŒºæ•°æ®ä¸ç­›é€‰åŠŸèƒ½ ========== */
        // æœºæ„å›¾æ ‡é…ç½®
        const institutionConfig = {
            'ä¼—åˆæ•™è‚²': { 
                icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>',
                color: 'from-blue-500 to-blue-600',
                bgColor: 'bg-blue-500'
            },
            'åšå¤§æ³•è€ƒ': { 
                icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"></path></svg>',
                color: 'from-amber-500 to-orange-600',
                bgColor: 'bg-amber-500'
            },
            'å¬è¿‡æ³•è€ƒ': { 
                icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>',
                color: 'from-emerald-500 to-teal-600',
                bgColor: 'bg-emerald-500'
            },
            'ç‘è¾¾æ³•è€ƒ': { 
                icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',
                color: 'from-purple-500 to-indigo-600',
                bgColor: 'bg-purple-500'
            },
            'è§‰æ™“æ³•è€ƒ': { 
                icon: '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>',
                color: 'from-rose-500 to-pink-600',
                bgColor: 'bg-rose-500'
            }
        };

        const courseData = [{"institution": "ä¼—åˆæ•™è‚²", "subject": "ä¸‰å›½æ³•", "teacher": "æ¨å¸†", "duration": "28:01:45", "url": "https://www.bilibili.com/video/BV1t6yzBeEVF"}, {"institution": "ä¼—åˆæ•™è‚²", "subject": "å•†ç»çŸ¥", "teacher": "éƒ„é¹æ©", "duration": "28:42:51", "url": "https://www.bilibili.com/video/BV1Q8iMBhEjH"}, {"institution": "ä¼—åˆæ•™è‚²", "subject": "æ°‘è¯‰æ³•", "teacher": "æˆ´é¹", "duration": "34:36:35", "url": "https://www.bilibili.com/video/BV1zUBDBKEsH"}, {"institution": "ä¼—åˆæ•™è‚²", "subject": "åˆ‘è¯‰æ³•", "teacher": "å·¦å®", "duration": "48:26:06", "url": "https://www.bilibili.com/video/BV1nLBVBPEh6"}, {"institution": "ä¼—åˆæ•™è‚²", "subject": "è¡Œæ”¿æ³•", "teacher": "æä½³", "duration": "44:55:54", "url": "https://www.bilibili.com/video/BV1qyB5BAEXX"}, {"institution": "ä¼—åˆæ•™è‚²", "subject": "åˆ‘æ³•", "teacher": "æŸæµªæ¶›", "duration": "56:41:23", "url": "https://www.bilibili.com/video/BV1EX1aBTER8"}, {"institution": "ä¼—åˆæ•™è‚²", "subject": "æ°‘æ³•", "teacher": "å­ŸçŒ®è´µ", "duration": "56:16:38", "url": "https://www.bilibili.com/video/BV1Z7yzBJERB"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "ä¸‰å›½æ³•", "teacher": "èµµæ˜é˜³", "duration": "20:17:30", "url": "https://www.bilibili.com/video/BV1rEquBQEs5"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "æ°‘æ³•", "teacher": "æåŠ²æ¾", "duration": "63:10:48", "url": "https://www.bilibili.com/video/BV1vavbBoE5W"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "åˆ‘æ³•", "teacher": "å¾å…‰å", "duration": "75:44:49", "url": "https://www.bilibili.com/video/BV1cVsmzjEB4"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "æ°‘æ³•", "teacher": "å¤æ˜Šæ™—", "duration": "48:48:17", "url": "https://www.bilibili.com/video/BV1hpycBaEph"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "æ°‘è¯‰æ³•", "teacher": "éŸ©å¿ƒæ€¡", "duration": "45:07:32", "url": "https://www.bilibili.com/video/BV1Ja2zBoEDj"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "åˆ‘è¯‰æ³•", "teacher": "è‚–æ²›æƒ", "duration": "38:17:55", "url": "https://www.bilibili.com/video/BV1d1ipB2E9j"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "å•†ç»çŸ¥", "teacher": "åˆ˜å®‰çª", "duration": "43:16:16", "url": "https://www.bilibili.com/video/BV1i4iWBUEU5"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "è¡Œæ”¿æ³•", "teacher": "å…°ç‡•å“", "duration": "29:43:16", "url": "https://www.bilibili.com/video/BV1ViquBgEvm"}, {"institution": "è§‰æ™“æ³•è€ƒ", "subject": "ç†è®ºæ³•", "teacher": "æå®å‹ƒ", "duration": "32:07:29", "url": "https://www.bilibili.com/video/BV1xCkLBtEYM"}, {"institution": "ç‘è¾¾æ³•è€ƒ", "subject": "åˆ‘æ³•", "teacher": "è”¡é›…å¥‡", "duration": "53:21:52", "url": "https://www.bilibili.com/video/BV1jeUbBYELu"}, {"institution": "ç‘è¾¾æ³•è€ƒ", "subject": "ç†è®ºæ³•", "teacher": "å®‹å…‰æ˜", "duration": "41:50:58", "url": "https://www.bilibili.com/video/BV1Vqq3B7EV9"}, {"institution": "ç‘è¾¾æ³•è€ƒ", "subject": "å•†ç»çŸ¥", "teacher": "ææ™—", "duration": "49:00:56", "url": "https://www.bilibili.com/video/BV1YyvWBVELi"}, {"institution": "ç‘è¾¾æ³•è€ƒ", "subject": "åˆ‘è¯‰æ³•", "teacher": "æ¨é›„", "duration": "54:16:42", "url": "https://www.bilibili.com/video/BV1nMU8BgELD"}, {"institution": "ç‘è¾¾æ³•è€ƒ", "subject": "ä¸‰å›½æ³•", "teacher": "ç‹æ–Œ", "duration": "34:23:49", "url": "https://www.bilibili.com/video/BV1hAvYBAEZq"}, {"institution": "ç‘è¾¾æ³•è€ƒ", "subject": "æ°‘æ³•", "teacher": "é’Ÿç§€å‹‡", "duration": "51:18:57", "url": "https://www.bilibili.com/video/BV12Vz5B7EE1"}, {"institution": "å¬è¿‡æ³•è€ƒ", "subject": "è¡Œæ”¿æ³•", "teacher": "æå¹´æ¸…", "duration": "2:48:15", "url": "https://www.bilibili.com/video/BV18BFKzDELo"}, {"institution": "å¬è¿‡æ³•è€ƒ", "subject": "åˆ‘è¯‰æ³•", "teacher": "æ¸©äº‘äº‘", "duration": "38:49:26", "url": "https://www.bilibili.com/video/BV1gH2VBzEEA"}, {"institution": "å¬è¿‡æ³•è€ƒ", "subject": "æ°‘è¯‰æ³•", "teacher": "è”¡è¾‰", "duration": "11:12:39", "url": "https://www.bilibili.com/video/BV1g26uB5EKu"}, {"institution": "å¬è¿‡æ³•è€ƒ", "subject": "æ°‘æ³•", "teacher": "éŸ©ç¥¥æ³¢", "duration": "48:52:28", "url": "https://www.bilibili.com/video/BV1WPUCBJEyr"}, {"institution": "å¬è¿‡æ³•è€ƒ", "subject": "æ°‘æ³•", "teacher": "ä½™æ³‰å›", "duration": "90:53:12", "url": "https://www.bilibili.com/video/BV1SsCSBhEuM"}, {"institution": "å¬è¿‡æ³•è€ƒ", "subject": "åˆ‘æ³•", "teacher": "å¼ å®‡ç›", "duration": "45:15:47", "url": "https://www.bilibili.com/video/BV1qa19BFESt"}, {"institution": "åšå¤§æ³•è€ƒ", "subject": "åˆ‘æ³•", "teacher": "åˆ˜å‡¤ç§‘", "duration": "0:0:0", "url": "https://www.bilibili.com/video/BV1XckvBoEQy"}, {"institution": "åšå¤§æ³•è€ƒ", "subject": "å•†ç»æ³•", "teacher": "é„¢æ¢¦è±", "duration": "13:26:07", "url": "https://www.bilibili.com/video/BV1hX1aBTEr9"}, {"institution": "åšå¤§æ³•è€ƒ", "subject": "æ°‘æ³•", "teacher": "å¼ ç¿”", "duration": "52:57:14", "url": "https://www.bilibili.com/video/BV11zs1zSEPS"}, {"institution": "åšå¤§æ³•è€ƒ", "subject": "åˆ‘æ³•", "teacher": "ç½—ç¿”", "duration": "42:34:36", "url": "https://www.bilibili.com/video/BV15kyBB5Eg8"}, {"institution": "åšå¤§æ³•è€ƒ", "subject": "åˆ‘è¯‰æ³•", "teacher": "å‘é«˜ç”²", "duration": "34:42:53", "url": "https://www.bilibili.com/video/BV1vmkTBQELC"}, {"institution": "åšå¤§æ³•è€ƒ", "subject": "æ°‘è¯‰æ³•", "teacher": "åˆ˜é¹é£", "duration": "25:23:04", "url": "https://www.bilibili.com/video/BV16MiQBvEuE"}, {"institution": "åšå¤§æ³•è€ƒ", "subject": "ä¸‰å›½æ³•", "teacher": "æ®·æ•", "duration": "26:39:31", "url": "https://www.bilibili.com/video/BV1j7vsBDEWu"}, {"institution": "åšå¤§æ³•è€ƒ", "subject": "è¡Œæ”¿æ³•", "teacher": "é­å»ºæ–°", "duration": "27:18:19", "url": "https://www.bilibili.com/video/BV1j7vsBDEWu"}];

        let currentFilters = {
            institution: 'all',
            subject: 'all'
        };

        // æ¸²æŸ“è¯¾ç¨‹å¡ç‰‡
        function renderCourses(courses) {
            const grid = document.getElementById('courseGrid');
            const stats = document.getElementById('courseStats');

            // æ›´æ–°ç»Ÿè®¡
            stats.textContent = `å…± ${courses.length} é—¨`;;

            // æ¸…ç©ºç°æœ‰å†…å®¹
            grid.innerHTML = '';

            if (courses.length === 0) {
                grid.innerHTML = `
                    <div class="text-center py-6 text-[var(--text-muted)]">
                        <svg class="w-10 h-10 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <p class="text-xs">æ— åŒ¹é…è¯¾ç¨‹</p>
                    </div>
                `;
                return;
            }

            // ç”Ÿæˆå¡ç‰‡
            courses.forEach((course, index) => {
                const card = document.createElement('div');
                card.className = 'bg-[var(--card-bg)] border border-[var(--glass-border)] rounded-xl p-4 transition-all duration-300 hover:shadow-xl hover:shadow-[var(--accent-glow)] hover:-translate-y-1 cursor-pointer group hover:border-[var(--primary-color)] hover:border-opacity-50 course-card-enter';
                card.style.animationDelay = `${index * 0.05}s`;
                card.style.animationDelay = `${index * 0.05}s`;
                card.innerHTML = `
                    <div class="flex items-start gap-3">
                        <!-- æœºæ„å›¾æ ‡ -->
                        <div class="flex-shrink-0 w-10 h-10 rounded-xl bg-gradient-to-br ${(institutionConfig[course.institution] ? institutionConfig[course.institution].color : institutionConfig['ä¼—åˆæ•™è‚²'].color)} text-white flex items-center justify-center shadow-lg">
                            ${(institutionConfig[course.institution] ? institutionConfig[course.institution].icon : institutionConfig['ä¼—åˆæ•™è‚²'].icon)}
                        </div>

                        <!-- å†…å®¹åŒº -->
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-xs font-medium text-[var(--text-main)]">${course.institution}</span>
                                <span class="w-1 h-1 rounded-full bg-[var(--text-muted)] opacity-50"></span>
                                <span class="text-xs text-[var(--primary-color)]">${course.subject}</span>
                            </div>
                            <h4 class="text-base font-bold text-[var(--text-main)] mb-1 group-hover:text-[var(--primary-color)] transition-colors truncate">
                                ${course.teacher}è€å¸ˆ
                            </h4>
                            <div class="flex items-center gap-1 text-xs text-[var(--text-muted)]">
                                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span>${course.duration}</span>
                            </div>
                        </div>

                        <!-- æ’­æ”¾æŒ‰é’® -->
                        <a href="${course.url}" target="_blank" class="flex-shrink-0 w-9 h-9 rounded-full bg-[var(--glass-bg)] border border-[var(--glass-border)] text-[var(--primary-color)] flex items-center justify-center hover:bg-[var(--primary-color)] hover:text-white transition-all shadow-md" onclick="event.stopPropagation();">
                            <svg class="w-4 h-4 ml-0.5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                        </a>
                    </div>
                `;
                card.onclick = () => window.open(course.url, '_blank');
                grid.appendChild(card);
            });
        }

        // æŒ‰æœºæ„ç­›é€‰
        function filterByInstitution(institution) {
            currentFilters.institution = institution;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('#institutionFilters .filter-btn').forEach(btn => {
                if (btn.dataset.filter === institution) {
                    btn.classList.add('active', 'bg-[var(--primary-color)]', 'text-white');
                    btn.classList.remove('text-[var(--text-muted)]');
                } else {
                    btn.classList.remove('active', 'bg-[var(--primary-color)]', 'text-white');
                    btn.classList.add('text-[var(--text-muted)]');
                }
            });

            applyFilters();
        }

        // æŒ‰ç§‘ç›®ç­›é€‰
        function filterBySubject(subject) {
            currentFilters.subject = subject;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('#subjectFilters .filter-btn-sub').forEach(btn => {
                if (btn.dataset.filter === subject) {
                    btn.classList.add('active', 'bg-[var(--primary-color)]', 'text-white');
                    btn.classList.remove('text-[var(--text-muted)]');
                } else {
                    btn.classList.remove('active', 'bg-[var(--primary-color)]', 'text-white');
                    btn.classList.add('text-[var(--text-muted)]');
                }
            });

            applyFilters();
        }

        // åº”ç”¨ç­›é€‰
        function applyFilters() {
            let filtered = courseData;

            if (currentFilters.institution !== 'all') {
                filtered = filtered.filter(c => c.institution === currentFilters.institution);
            }

            if (currentFilters.subject !== 'all') {
                filtered = filtered.filter(c => c.subject === currentFilters.subject);
            }

            renderCourses(filtered);
        }

        // é‡ç½®ç­›é€‰
        function resetVideoFilters() {
            currentFilters = { institution: 'all', subject: 'all' };
            filterByInstitution('all');
            filterBySubject('all');
            showToast('ç­›é€‰å·²é‡ç½®');
        }

        // åˆå§‹åŒ–è§†é¢‘å­¦ä¹ åŒº
        function initVideoArea() {
            renderCourses(courseData);
        }

/* ========== åˆå§‹åŒ– ========== */
        function init() {
            // åˆå§‹åŒ–èƒŒæ™¯
            initBackground();
            
            // åˆå§‹æ›´æ–°å€’è®¡æ—¶
            updateCountdown();
            // æ¯ç§’æ›´æ–°å€’è®¡æ—¶
            setInterval(updateCountdown, 1000);
            
            // ç‚¹å‡»åè¨€åˆ‡æ¢
            document.getElementById('poemContainer').addEventListener('click', changePoem);
            
            // åˆå§‹åˆ‡æ¢ä¸€æ¬¡åè¨€å¢åŠ éšæœºæ€§
            setTimeout(changePoem, 1000);
            
            // åˆå§‹åŒ–ç•ªèŒ„é’Ÿæç¤ºæ–‡æœ¬
            updatePomodoroTipText();
            
            // æ˜¾ç¤ºæ¬¢è¿æç¤º
            setTimeout(() => {
                initVideoArea();
            showToast('2026æ³•è€ƒå¤‡è€ƒåŠ©æ‰‹å·²å°±ç»ªï¼');
            }, 1500);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>